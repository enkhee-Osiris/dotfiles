# ------------------------------------------------------------------------------
# Homebrew
# ------------------------------------------------------------------------------

if [[ -x /opt/homebrew/bin/brew ]]; then
  eval "$(/opt/homebrew/bin/brew shellenv)"
fi

if [[ -d /usr/local/bin ]]; then
  PATH="/usr/local/bin:$PATH"
fi

if [[ -d $HOME/.local/bin ]]; then
  PATH="$HOME/.local/bin:$PATH"
fi

if [[ -d /opt/homebrew/opt/coreutils/libexec/gnubin ]]; then
  PATH="/opt/homebrew/opt/coreutils/libexec/gnubin:$PATH"
fi

if [[ -d /opt/homebrew/opt/findutils/libexec/gnubin ]]; then
  PATH="/opt/homebrew/opt/findutils/libexec/gnubin:$PATH"
fi

if [[ -d /opt/homebrew/bin ]]; then
  PATH="/opt/homebrew/bin:$PATH"
fi

# ------------------------------------------------------------------------------
# Ruby
# ------------------------------------------------------------------------------

if [[ -d /opt/homebrew/opt/ruby/bin ]]; then
  PATH="/opt/homebrew/opt/ruby/bin:$PATH"
fi

# ------------------------------------------------------------------------------
# Python
# ------------------------------------------------------------------------------

if [[ -d /opt/homebrew/opt/python@3.12/libexec/bin ]]; then
  PATH="/opt/homebrew/opt/python@3.12/libexec/bin:$PATH"
fi

# ------------------------------------------------------------------------------
# Node.js / JS tooling
# ------------------------------------------------------------------------------

if [[ -d /opt/homebrew/opt/node@22/bin ]]; then
  PATH="/opt/homebrew/opt/node@22/bin:$PATH"

  export NPM_PACKAGES="$HOME/.node_modules"

  if [[ -d $NPM_PACKAGES/bin ]]; then
    PATH="$NPM_PACKAGES/bin:$PATH"
  else
    mkdir -p "$NPM_PACKAGES/bin"
    PATH="$NPM_PACKAGES/bin:$PATH"
  fi
fi

if [[ -d $HOME/.yarn ]]; then
  PATH="$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH"
fi

if [[ -d $HOME/Library/pnpm ]]; then
  export PNPM_HOME="$HOME/Library/pnpm"
  PATH="$PNPM_HOME:$PATH"
fi

# ------------------------------------------------------------------------------
# Java
# ------------------------------------------------------------------------------

if [[ -d /opt/homebrew/opt/openjdk@17 ]]; then
  export JAVA_HOME="/opt/homebrew/opt/openjdk@17"
  export JDK_HOME="$JAVA_HOME"

  PATH="$JAVA_HOME/bin:$PATH"
fi

# ------------------------------------------------------------------------------
# Android SDK
# ------------------------------------------------------------------------------

if [[ -d $HOME/Library/Android/sdk ]]; then
  export ANDROID_HOME="$HOME/Library/Android/sdk"

  if [[ -d $ANDROID_HOME/platform-tools ]]; then
    PATH="$PATH:$ANDROID_HOME/platform-tools"
  fi

  if [[ -d $ANDROID_HOME/emulator ]]; then
    PATH="$PATH:$ANDROID_HOME/emulator"
  fi

  if [[ -d $HOME/Library/Android/ndk ]]; then
    export ANDROID_NDK="$HOME/Library/Android/ndk"
    export ANDROID_NDK_HOME="$ANDROID_NDK"
  fi

  if [[ -d $ANDROID_HOME/opencv ]]; then
    export OpenCV_ANDROID_HOME="$ANDROID_HOME/opencv"
  fi
fi

# ------------------------------------------------------------------------------
# Google Cloud SDK
# ------------------------------------------------------------------------------

if [ -f '/opt/google-cloud-sdk/path.zsh.inc' ]; then . '/opt/google-cloud-sdk/path.zsh.inc'; fi

if [ -f '/opt/google-cloud-sdk/completion.zsh.inc' ]; then . '/opt/google-cloud-sdk/completion.zsh.inc'; fi

# ------------------------------------------------------------------------------
# Emacs & Doom
# ------------------------------------------------------------------------------

if [[ -d /Applications/Emacs.app ]]; then
  PATH="/Applications/Emacs.app/Contents/MacOS/bin:$PATH"
  alias emacs="emacs -nw"
fi

if [[ -d $HOME/.config/emacs/bin ]]; then
  PATH="$HOME/.config/emacs/bin:$PATH"
fi

export PATH="$PATH"
